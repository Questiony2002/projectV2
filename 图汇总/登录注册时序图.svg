<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="600" version="1.1">
  <title>登录注册功能时序图</title>
  
  <!-- 参与者标题 -->
  <rect x="50" y="30" width="100" height="40" rx="5" ry="5" fill="white" stroke="black" stroke-width="2" />
  <text x="100" y="55" font-family="SimSun" font-size="10.5" text-anchor="middle">用户</text>
  
  <rect x="200" y="30" width="100" height="40" rx="5" ry="5" fill="white" stroke="black" stroke-width="2" />
  <text x="250" y="55" font-family="SimSun" font-size="10.5" text-anchor="middle">客户端</text>
  
  <rect x="350" y="30" width="100" height="40" rx="5" ry="5" fill="white" stroke="black" stroke-width="2" />
  <text x="400" y="55" font-family="SimSun" font-size="10.5" text-anchor="middle">用户控制器</text>
  
  <rect x="500" y="30" width="100" height="40" rx="5" ry="5" fill="white" stroke="black" stroke-width="2" />
  <text x="550" y="55" font-family="SimSun" font-size="10.5" text-anchor="middle">用户服务</text>
  
  <rect x="650" y="30" width="100" height="40" rx="5" ry="5" fill="white" stroke="black" stroke-width="2" />
  <text x="700" y="55" font-family="SimSun" font-size="10.5" text-anchor="middle">数据库</text>
  
  <!-- 生命线 -->
  <line x1="100" x2="100" y1="70" y2="550" stroke="black" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="250" x2="250" y1="70" y2="550" stroke="black" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="400" x2="400" y1="70" y2="550" stroke="black" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="550" x2="550" y1="70" y2="550" stroke="black" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="700" x2="700" y1="70" y2="550" stroke="black" stroke-width="1" stroke-dasharray="5,5" />
  
  <!-- 1. 用户打开登录页面 -->
  <line x1="100" y1="100" x2="250" y2="100" stroke="black" stroke-width="2" />
  <polygon points="245,95 250,100 245,105" fill="black" />
  <text x="175" y="95" font-family="SimSun" font-size="10.5">1: 打开登录页面</text>
  
  <!-- 激活客户端 -->
  <rect x="245" y="100" width="10" height="440" fill="white" stroke="black" stroke-width="1" />
  
  <!-- 2. 用户输入登录信息 -->
  <line x1="100" y1="120" x2="250" y2="120" stroke="black" stroke-width="2" />
  <polygon points="245,115 250,120 245,125" fill="black" />
  <text x="175" y="115" font-family="SimSun" font-size="10.5">2: 输入登录信息</text>
  
  <!-- 3. 请求登录 -->
  <line x1="255" y1="140" x2="400" y2="140" stroke="black" stroke-width="2" />
  <polygon points="395,135 400,140 395,145" fill="black" />
  <text x="327" y="135" font-family="SimSun" font-size="10.5">3: 请求登录</text>
  
  <!-- 激活用户控制器 -->
  <rect x="395" y="140" width="10" height="400" fill="white" stroke="black" stroke-width="1" />
  
  <!-- 4. 调用用户服务 -->
  <line x1="405" y1="160" x2="550" y2="160" stroke="black" stroke-width="2" />
  <polygon points="545,155 550,160 545,165" fill="black" />
  <text x="477" y="155" font-family="SimSun" font-size="10.5">4: 调用用户服务</text>
  
  <!-- 激活用户服务 -->
  <rect x="545" y="160" width="10" height="380" fill="white" stroke="black" stroke-width="1" />
  
  <!-- 5. 查询数据库 -->
  <line x1="555" y1="180" x2="700" y2="180" stroke="black" stroke-width="2" />
  <polygon points="695,175 700,180 695,185" fill="black" />
  <text x="627" y="175" font-family="SimSun" font-size="10.5">5: 查询用户信息</text>
  
  <!-- 激活数据库 -->
  <rect x="695" y="180" width="10" height="40" fill="white" stroke="black" stroke-width="1" />
  
  <!-- 6. 返回用户数据 -->
  <line x1="695" y1="220" x2="555" y2="220" stroke="black" stroke-width="2" />
  <polygon points="560,215 555,220 560,225" fill="black" />
  <text x="625" y="215" font-family="SimSun" font-size="10.5">6: 返回用户数据</text>
  
  <!-- 7. 验证用户信息 -->
  <line x1="555" y1="240" x2="575" y2="240" stroke="black" stroke-width="2" />
  <line x1="575" y1="240" x2="575" y2="260" stroke="black" stroke-width="2" />
  <line x1="575" y1="260" x2="555" y2="260" stroke="black" stroke-width="2" />
  <polygon points="560,255 555,260 560,265" fill="black" />
  <text x="585" y="250" font-family="SimSun" font-size="10.5">7: 验证用户信息</text>
  
  <!-- 8. 生成登录令牌 -->
  <line x1="555" y1="280" x2="575" y2="280" stroke="black" stroke-width="2" />
  <line x1="575" y1="280" x2="575" y2="300" stroke="black" stroke-width="2" />
  <line x1="575" y1="300" x2="555" y2="300" stroke="black" stroke-width="2" />
  <polygon points="560,295 555,300 560,305" fill="black" />
  <text x="585" y="290" font-family="SimSun" font-size="10.5">8: 生成登录令牌</text>
  
  <!-- 9. 返回登录结果 -->
  <line x1="545" y1="320" x2="405" y2="320" stroke="black" stroke-width="2" />
  <polygon points="410,315 405,320 410,325" fill="black" />
  <text x="475" y="315" font-family="SimSun" font-size="10.5">9: 返回登录结果</text>
  
  <!-- 10. 返回HTTP响应 -->
  <line x1="395" y1="340" x2="255" y2="340" stroke="black" stroke-width="2" />
  <polygon points="260,335 255,340 260,345" fill="black" />
  <text x="325" y="335" font-family="SimSun" font-size="10.5">10: 返回HTTP响应</text>
  
  <!-- 11. 更新UI显示 -->
  <line x1="245" y1="360" x2="100" y2="360" stroke="black" stroke-width="2" />
  <polygon points="105,355 100,360 105,365" fill="black" />
  <text x="172" y="355" font-family="SimSun" font-size="10.5">11: 更新UI显示</text>
  
  <!-- 12. 用户点击注册 -->
  <line x1="100" y1="400" x2="250" y2="400" stroke="black" stroke-width="2" />
  <polygon points="245,395 250,400 245,405" fill="black" />
  <text x="175" y="395" font-family="SimSun" font-size="10.5">12: 点击注册按钮</text>
  
  <!-- 13. 用户输入注册信息 -->
  <line x1="100" y1="420" x2="250" y2="420" stroke="black" stroke-width="2" />
  <polygon points="245,415 250,420 245,425" fill="black" />
  <text x="175" y="415" font-family="SimSun" font-size="10.5">13: 输入注册信息</text>
  
  <!-- 14. 请求注册 -->
  <line x1="255" y1="440" x2="400" y2="440" stroke="black" stroke-width="2" />
  <polygon points="395,435 400,440 395,445" fill="black" />
  <text x="327" y="435" font-family="SimSun" font-size="10.5">14: 请求注册</text>
  
  <!-- 15. 调用用户服务 -->
  <line x1="405" y1="460" x2="550" y2="460" stroke="black" stroke-width="2" />
  <polygon points="545,455 550,460 545,465" fill="black" />
  <text x="477" y="455" font-family="SimSun" font-size="10.5">15: 调用用户服务</text>
  
  <!-- 16. 检查用户名是否已存在 -->
  <line x1="555" y1="480" x2="700" y2="480" stroke="black" stroke-width="2" />
  <polygon points="695,475 700,480 695,485" fill="black" />
  <text x="627" y="475" font-family="SimSun" font-size="10.5">16: 检查用户名是否已存在</text>
  
  <!-- 激活数据库 -->
  <rect x="695" y="480" width="10" height="40" fill="white" stroke="black" stroke-width="1" />
  
  <!-- 17. 返回检查结果 -->
  <line x1="695" y1="520" x2="555" y2="520" stroke="black" stroke-width="2" />
  <polygon points="560,515 555,520 560,525" fill="black" />
  <text x="625" y="515" font-family="SimSun" font-size="10.5">17: 返回检查结果</text>
  
  <!-- 18. 创建新用户 -->
  <line x1="555" y1="540" x2="700" y2="540" stroke="black" stroke-width="2" />
  <polygon points="695,535 700,540 695,545" fill="black" />
  <text x="627" y="535" font-family="SimSun" font-size="10.5">18: 创建新用户</text>
  
  <!-- 19. 返回注册结果 -->
  <line x1="545" y1="560" x2="405" y2="560" stroke="black" stroke-width="2" />
  <polygon points="410,555 405,560 410,565" fill="black" />
  <text x="475" y="555" font-family="SimSun" font-size="10.5">19: 返回注册结果</text>
  
  <!-- 20. 返回HTTP响应 -->
  <line x1="395" y1="580" x2="255" y2="580" stroke="black" stroke-width="2" />
  <polygon points="260,575 255,580 260,585" fill="black" />
  <text x="325" y="575" font-family="SimSun" font-size="10.5">20: 返回HTTP响应</text>
  
  <!-- 21. 更新UI显示 -->
  <line x1="245" y1="600" x2="100" y2="600" stroke="black" stroke-width="2" />
  <polygon points="105,595 100,600 105,605" fill="black" />
  <text x="172" y="595" font-family="SimSun" font-size="10.5">21: 更新UI显示</text>
</svg>