<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="800" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <style>
    @font-face {
      font-family: "SimSun";
      src: local("SimSun");
    }
    @font-face {
      font-family: "Times New Roman";
      src: local("Times New Roman");
    }
    .title {
      font-family: "SimSun";
      font-size: 10.5px;
      font-weight: bold;
      text-anchor: middle;
    }
    .node-text {
      font-family: "SimSun";
      font-size: 10.5px;
      text-anchor: middle;
    }
    .activity { fill: #fff; stroke: #000; stroke-width: 1.5; }
    .decision { fill: #fff; stroke: #000; stroke-width: 1.5; }
    .start-end { fill: #000; stroke: #000; stroke-width: 1.5; }
    .note { fill: #fff; stroke: #000; stroke-width: 1; }
    .arrow {
      stroke: #000;
      stroke-width: 1.5;
      fill: none;
      marker-end: url(#arrowhead);
    }
    .arrow-text {
      font-family: "SimSun";
      font-size: 10.5px;
      text-anchor: middle;
    }
    .swimlane {
      stroke: #000;
      stroke-width: 1;
      fill: none;
      stroke-dasharray: 5,3;
    }
    .swimlane-text {
      font-family: "SimSun";
      font-size: 10.5px;
      text-anchor: middle;
    }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  
  <rect width="100%" height="100%" fill="white" />
  
  <!-- 泳道 -->
  <line x1="266" y1="50" x2="266" y2="730" class="swimlane" />
  <line x1="533" y1="50" x2="533" y2="730" class="swimlane" />
  <text x="133" y="90" class="swimlane-text">用户</text>
  <text x="400" y="90" class="swimlane-text">服务器</text>
  <text x="666" y="90" class="swimlane-text">数据库</text>
  
  <!-- 开始节点 -->
  <circle cx="133" cy="110" r="10" class="start-end" />
  
  <!-- 选择登录/注册 -->
  <rect x="68" y="140" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="165" class="node-text">选择登录/注册</text>
  
  <!-- 判断登录还是注册 -->
  <path d="M108,210 L158,210 L133,240 Z" class="decision" />
  <text x="133" y="220" class="node-text">登录/注册?</text>
  
  <!-- 登录活动 -->
  <rect x="68" y="270" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="295" class="node-text">输入用户名和密码</text>
  
  <!-- 点击登录按钮 -->
  <rect x="68" y="340" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="365" class="node-text">点击登录按钮</text>
  
  <!-- 接收登录请求 -->
  <rect x="335" y="340" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="365" class="node-text">接收登录请求</text>
  
  <!-- 验证用户信息 -->
  <rect x="335" y="410" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="435" class="node-text">验证用户信息</text>
  
  <!-- 查询用户信息 -->
  <rect x="602" y="410" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="667" y="435" class="node-text">查询用户表</text>
  
  <!-- 登录判断 -->
  <path d="M375,480 L425,480 L400,510 Z" class="decision" />
  <text x="400" y="490" class="node-text">验证通过?</text>
  
  <!-- 生成JWT Token -->
  <rect x="335" y="540" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="565" class="node-text">生成JWT Token</text>
  
  <!-- 返回登录结果 -->
  <rect x="335" y="610" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="635" class="node-text">返回登录结果</text>
  
  <!-- 处理登录结果 -->
  <rect x="68" y="610" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="635" class="node-text">处理登录结果</text>
  
  <!-- 登录结果判断 -->
  <path d="M108,680 L158,680 L133,710 Z" class="decision" />
  <text x="133" y="690" class="node-text">登录成功?</text>
  
  <!-- 保存用户信息 -->
  <rect x="68" y="730" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="755" class="node-text">保存用户信息和Token</text>

  <!-- 注册活动（输入注册信息） -->
  <rect x="335" y="270" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="295" class="node-text">输入注册信息</text>
  
  <!-- 查询数据库（注册） -->
  <rect x="602" y="270" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="667" y="295" class="node-text">检查用户是否存在</text>
  
  <!-- 结束节点 -->
  <circle cx="230" cy="750" r="10" class="start-end" stroke="white" />
  <circle cx="230" cy="750" r="8" fill="white" />
  
  <!-- 连线 -->
  <!-- 初始节点到选择 -->
  <path d="M133,120 L133,140" class="arrow" />
  
  <!-- 选择到判断 -->
  <path d="M133,180 L133,210" class="arrow" />
  
  <!-- 判断到登录 -->
  <path d="M133,240 L133,270" class="arrow" />
  <text x="150" y="255" class="arrow-text">登录</text>
  
  <!-- 判断到注册 -->
  <path d="M150,220 L400,220 L400,270" class="arrow" />
  <text x="220" y="210" class="arrow-text">注册</text>
  
  <!-- 注册流程 -->
  <path d="M465,290 L602,290" class="arrow" />
  <path d="M667,310 L667,408" class="arrow" />
  
  <!-- 登录流程 -->
  <path d="M133,310 L133,340" class="arrow" />
  <path d="M198,360 L335,360" class="arrow" />
  <path d="M400,380 L400,410" class="arrow" />
  <path d="M465,430 L602,430" class="arrow" />
  <path d="M602,450 L465,450" class="arrow" />
  <path d="M400,450 L400,480" class="arrow" />
  
  <!-- 验证失败 -->
  <path d="M387,495 L335,495 L335,610" class="arrow" />
  <text x="350" y="530" class="arrow-text">否</text>
  
  <!-- 验证成功 -->
  <path d="M400,510 L400,540" class="arrow" />
  <text x="415" y="525" class="arrow-text">是</text>
  
  <path d="M400,580 L400,610" class="arrow" />
  <path d="M335,630 L198,630" class="arrow" />
  <path d="M133,650 L133,680" class="arrow" />
  
  <!-- 登录成功 -->
  <path d="M133,710 L133,730" class="arrow" />
  <text x="148" y="720" class="arrow-text">是</text>
  
  <!-- 登录失败 -->
  <path d="M115,690 L50,690 L50,295 L68,295" class="arrow" />
  <text x="60" y="530" class="arrow-text">否</text>
  
  <!-- 用户信息保存后结束 -->
  <path d="M198,750 L220,750" class="arrow" />
  
  <!-- 注释 -->
  <rect x="335" y="670" width="170" height="60" rx="5" ry="5" class="note" />
  <text x="420" y="690" class="node-text">JWT包含:</text>
  <text x="420" y="710" class="node-text">1.用户ID和用户名</text>
  <text x="420" y="730" class="node-text">2.过期时间和签名</text>
</svg> 