<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <style>
    @font-face { font-family: "SimSun"; src: local("SimSun"); }
    @font-face { font-family: "Times New Roman"; src: local("Times New Roman"); }
    .title { font-family: "SimSun"; font-size: 10.5px; font-weight: bold; text-anchor: middle; }
    .node-text { font-family: "SimSun"; font-size: 10.5px; text-anchor: middle; }
    .activity { fill: #fff; stroke: #000; stroke-width: 1.5; }
    .decision { fill: #fff; stroke: #000; stroke-width: 1.5; }
    .start-end { fill: #000; stroke: #000; stroke-width: 1.5; }
    .note { fill: #fff; stroke: #000; stroke-width: 1; }
    .arrow { stroke: #000; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
    .arrow-text { font-family: "SimSun"; font-size: 10.5px; text-anchor: middle; }
    .swimlane { stroke: #000; stroke-width: 1; fill: none; stroke-dasharray: 5,3; }
    .swimlane-text {
      font-family: "SimSun";
      font-size: 10.5px;
      text-anchor: middle;
    }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  <rect width="100%" height="100%" fill="white" />
  <!-- 泳道 -->
  <line x1="266" y1="50" x2="266" y2="580" class="swimlane" />
  <line x1="533" y1="50" x2="533" y2="580" class="swimlane" />
  <text x="133" y="90" class="swimlane-text">用户</text>
  <text x="400" y="90" class="swimlane-text">服务器</text>
  <text x="666" y="90" class="swimlane-text">AI模型</text>
  <!-- 开始节点 -->
  <circle cx="133" cy="110" r="10" class="start-end" />
  <!-- 加载历史消息 -->
  <rect x="68" y="140" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="165" class="node-text">加载历史消息</text>
  <!-- 展示历史消息 -->
  <rect x="68" y="200" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="225" class="node-text">展示历史消息</text>
  <!-- 用户输入消息 -->
  <rect x="68" y="260" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="285" class="node-text">输入消息</text>
  <!-- 保存用户消息 -->
  <rect x="335" y="260" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="285" class="node-text">保存用户消息</text>
  <!-- 发送消息到AI -->
  <rect x="602" y="260" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="667" y="285" class="node-text">AI处理消息</text>
  <!-- AI生成回复 -->
  <rect x="602" y="320" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="667" y="345" class="node-text">生成AI回复</text>
  <!-- 保存AI消息 -->
  <rect x="335" y="380" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="400" y="405" class="node-text">保存AI消息</text>
  <!-- 展示AI消息 -->
  <rect x="68" y="440" width="130" height="40" rx="5" ry="5" class="activity" />
  <text x="133" y="465" class="node-text">展示AI消息</text>
  <!-- 结束节点 -->
  <circle cx="133" cy="530" r="10" class="start-end" stroke="white" />
  <circle cx="133" cy="530" r="8" fill="white" />
  <!-- 连线 -->
  <path d="M133,120 L133,140" class="arrow" />
  <path d="M133,180 L133,200" class="arrow" />
  <path d="M133,240 L133,260" class="arrow" />
  <path d="M198,280 L335,280" class="arrow" />
  <path d="M465,280 L602,280" class="arrow" />
  <path d="M667,300 L667,320" class="arrow" />
  <path d="M667,360 L465,400" class="arrow" />
  <path d="M400,420 L198,460" class="arrow" />
  <path d="M133,300 L133,440" class="arrow" />
  <path d="M133,480 L133,530" class="arrow" />
</svg> 