4.6系统详细功能设计
4.6.1登录注册功能详细设计
登录注册功能采用了前后端分离的架构设计，前端使用Android原生开发，后端采用Spring Boot框架实现。整个功能设计包含了用户注册、登录、信息管理等多个方面。在注册功能中，系统要求用户提供用户名、密码、邮箱和手机号等基本信息，后端会对这些信息进行多重验证，包括检查用户名、邮箱和手机号的唯一性，确保数据的准确性和安全性。密码采用Spring Security的PasswordEncoder进行加密存储，有效防止密码泄露。登录功能则通过JWT（JSON Web Token）实现身份认证，用户登录成功后，系统会生成一个包含用户信息的token，用于后续的接口访问认证。前端通过SharedPreferences持久化存储用户登录状态和token，实现自动登录功能。用户信息管理方面，系统支持修改用户名、个人简介、年级、性别、年龄等个人信息，并提供了头像上传功能，支持用户个性化设置。整个功能设计注重用户体验，包括输入验证、错误提示、加载状态显示等细节处理，同时通过合理的异常处理机制确保系统的稳定性和安全性。此外，系统还实现了密码修改功能，要求用户输入原密码进行验证，确保账户安全。整个登录注册功能的设计充分考虑了用户需求、数据安全和系统性能等多个方面，为用户提供了安全、便捷的账户管理体验，具体时序图如图4-8所示。

图4-8登录注册功能时序图

4.6.2AI心理咨询功能详细设计
AI心理咨询功能采用了现代化的即时通讯界面设计，实现了用户与AI之间的实时对话交互。前端采用Android原生开发，使用RecyclerView实现消息列表的展示，通过SQLite数据库本地存储对话历史记录，确保用户可以在离线状态下查看历史对话。界面设计采用了类似Telegram的现代风格，包括消息气泡、时间戳显示等细节处理，其中用户消息和AI回复使用不同的背景色进行区分，提升用户体验。消息时间显示采用智能处理机制，当消息间隔超过10分钟时才会显示时间戳，同一天的消息只显示时间，不同天的消息显示完整日期，避免界面冗余。后端采用Spring Boot框架，通过RESTful API实现前后端通信，支持消息的发送、接收和存储。系统采用JWT进行身份认证，确保对话安全性和用户隐私。AI回复功能目前采用模拟实现，预留了与AI模型集成的接口，为后续接入真实的AI模型提供了良好的扩展性。整个功能设计注重用户体验，包括消息发送的即时反馈、输入框的实时清空、消息列表的自动滚动等细节处理，同时通过本地数据库缓存确保数据的持久性和离线访问能力。此外，系统还支持对话历史的持久化存储，用户可以随时查看历史对话记录，便于回顾和追踪咨询过程。整个AI心理咨询功能的设计充分考虑了用户需求、界面美观性、系统性能和可扩展性等多个方面，为用户提供了便捷、安全的心理咨询服务，具体时序图如图4-9所示。

图4-9AI心理咨询功能时序图

4.6.3心理测试功能详细设计
心理测试功能采用了模块化设计，主要包含MBTI性格测试和SCL-90心理健康评估两个核心模块。MBTI测试模块通过精心设计的题目库，评估用户在四个维度（外向-内向、感觉-直觉、思考-情感、判断-知觉）上的倾向，每个题目都包含两个对立的选项，用户的选择会累积到相应维度的得分中，最终生成16种可能的性格类型结果，每种类型都配有详细的性格描述、特征分析、优势与劣势说明，帮助用户深入了解自己的性格特点。SCL-90模块则是一个专业的心理健康评估工具，包含90个标准化的心理症状自评题目，覆盖10个心理症状因子（如躯体化、强迫症状、人际关系敏感、抑郁、焦虑等），采用5级评分制，通过科学的计分方法计算总分、阳性项目数、因子分等指标，为用户提供全面的心理健康状况评估。两个测试模块都采用了现代化的用户界面设计，支持测试进度保存、结果查看、历史记录查询等功能，测试结果会与用户账号关联并存储在数据库中，方便用户随时查看和追踪自己的心理状态变化。后端采用Spring Boot框架，通过RESTful API提供服务，前端使用Android原生开发，实现了流畅的用户体验和可靠的数据处理。整个测试系统不仅提供了专业的心理评估工具，还注重用户体验和隐私保护，为用户提供了一个安全、便捷的心理健康自评平台，具体时序图如图4-10所示。

图4-10心理测试功能时序图

4.6.4心理资讯模块详细设计
心理资讯功能采用了现代化的技术架构和用户友好的界面设计，通过Python爬虫技术自动抓取中国心理学网的最新心理健康相关新闻，实现了资讯的实时更新和展示。后端采用Spring Boot框架，通过RESTful API提供服务，前端使用Android原生开发，采用Material Design设计风格，为用户提供了流畅的阅读体验。资讯列表使用RecyclerView实现，支持下拉刷新功能，每30分钟自动更新一次数据，确保用户能够获取最新的心理健康资讯。每条新闻以卡片形式展示，包含标题和发布日期，点击可直接跳转到原文链接，方便用户深入了解相关内容。系统采用模块化设计，包括新闻爬虫模块、数据存储模块、API服务模块和UI展示模块，各模块之间通过清晰的接口进行通信，保证了系统的可维护性和可扩展性。同时，系统还实现了完善的错误处理机制，包括网络错误提示、数据加载失败处理等，确保在各种异常情况下都能为用户提供良好的使用体验。整个资讯功能不仅提供了丰富的心理健康知识，还通过优雅的界面设计和流畅的交互体验，让用户在获取信息的同时感受到舒适和便捷，具体时序图如图4-11所示。

图4-11心理资讯功能时序图
4.6.5个人中心功能详细设计
个人中心功能是一个综合性的用户信息管理模块，采用现代化的Material Design设计风格，以卡片式布局展示用户信息，界面简洁直观。该功能主要包含三个核心部分：用户基本信息管理、心理测试结果展示和系统设置。在用户基本信息管理方面，用户可以查看和修改个人资料，包括用户名、头像、个性签名、年级、性别和年龄等信息，其中头像支持从相册选择上传，系统会自动处理图片上传和存储，并更新用户头像URL。在心理测试结果展示方面，系统会显示用户完成的MBTI性格测试和SCL-90心理健康评估的结果，其中MBTI测试结果会展示用户的性格类型、类型名称、详细描述、性格特征、优势和劣势等信息，而SCL-90测试结果则会显示总分、阳性项目数以及各因子得分，帮助用户全面了解自己的心理健康状况。在系统设置方面，用户可以修改密码和退出登录，修改密码时需要验证原密码，确保账户安全，退出登录时会清除本地存储的用户信息并跳转到登录页面。整个功能采用前后端分离的架构，前端使用Android原生框架开发，后端基于Spring Boot实现，通过RESTful API进行数据交互，使用JWT进行身份认证，确保数据传输的安全性。界面设计注重用户体验，采用响应式布局，适配不同尺寸的设备，并加入了适当的动画效果和交互反馈，使用户操作更加流畅自然，具体时序图如图4-12所示。

图4-12个人中心功能时序图